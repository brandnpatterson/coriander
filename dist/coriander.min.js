!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.bundle=e()}("undefined"!=typeof self?self:this,function(){"use strict";var t;return function(t){var s=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n,t)};t.exports=function(r,i){({$totalInputs:[],init:function(){this.cacheDOM(),this.bindEvents(),this.setup()},cacheDOM:function(){this.$inputs=r.querySelectorAll('input:not([type="radio"])'),this.$radioInputs=r.querySelectorAll('input[type="radio"]'),this.$textAreas=r.querySelectorAll("textarea")},bindEvents:function(){var n=this;r.addEventListener("submit",function(t){t.preventDefault(),n.validate();var e=n.$totalInputs.length;s(n.$totalInputs,function(t){t.parentNode.dataset.invalid&&e--}),n.$totalInputs.length===e?i.onSubmit?i.onSubmit({form:r,inputs:n.$totalInputs.filter(function(t){return"radio"===t.type&&!0===t.checked?t:"radio"!==t.type?t:void 0})}):r.submit():window.scrollTo(0,0)}),i&&i.onChange&&(this.onChange(this.$inputs),this.onChange(this.$radioInputs),this.onChange(this.$textAreas))},onChange:function(t){var e=this;s(t,function(t){t.addEventListener("change",function(){e.validate(t)})})},setup:function(){var n=this;s(this.$inputs,function(t){if(n.$totalInputs.push(t),t.dataset.required){var e=document.createElement("p");e.classList.add("coriander-error"),t.parentNode.appendChild(e)}}),s(n.$radioInputs,function(t){n.$totalInputs.push(t)}),s(n.$textAreas,function(t){if(n.$totalInputs.push(t),t.dataset.required){var e=document.createElement("p");e.classList.add("coriander-error"),t.parentNode.appendChild(e)}})},validate:function(t){function e(t){var e=t.dataset,n=t.parentNode.querySelector(".coriander-error"),i=t.value.match(t.dataset.regex);!e.regex&&e.required&&""===t.value?(n&&(n.textContent="This value is required"),t.parentNode.dataset.invalid=!0):n&&(i?(n&&(n.textContent=""),delete t.parentNode.dataset.invalid):(n.textContent=e.error,t.parentNode.dataset.invalid=!0))}var n,i,a,o;if(t)e(t);else for(n in s(this.$inputs,function(t){e(t)}),s(this.$textAreas,function(t){e(t)}),this.$totalInputs)"radio"===this.$totalInputs[n].type&&(i=this.$totalInputs[n],o=a=void 0,a=i.parentNode,o=a.querySelector(".coriander-error"),"on"===r[i.name].value?(o&&(o.textContent=""),delete a.dataset.invalid):(o&&(o.textContent=i.dataset.error),a.dataset.invalid=!0))}}).init()}}(t={exports:{}},t.exports),t.exports});
